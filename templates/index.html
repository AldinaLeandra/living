<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Osman Siddiqi | Code for South Africa </title>

  <!-- Bootstrap -->
  <link href="static\bootstrap\css\bootstrap.min.css" rel="stylesheet">
  <link href="static\bootstrap\css\bootstrap-select.min.css" rel="stylesheet">
  <link href="static\slider\css\bootstrap-slider.css" rel="stylesheet">
  <link href="static\styles.css" rel="stylesheet">


  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="container text-center">

  <div class="jumbotron">
    <h1>The Minimal Need</h1>
    <p class="lead">Understanding the cost of a minimal standard of living in South Africa</p>
    <!-- Button trigger modal -->
    <button class="btn btn-primary" data-toggle="modal" data-target="#myModal"><small>Open Description</small></button>
  </div>

</div>

<div id="input-container" class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <hr>
      <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
          <form id="input-form" role="form">
            <div class="form-group">
              <label for="pay-amount" class="lead">How much do you pay your household worker?</label><br>
              <div class="row">
                <div class="col-xs-4">
                  <input  class="form-control"
                          type="text"
                          name="pay-amount"
                          id="pay-amount"
                          placeholder="Rand"
                      />
                </div>
                <div class="col-xs-5">
                  <select class="selectpicker" name="pay-rate" id ="pay-rate">
                    <option value="">please select</option>
                    <option value="day" selected>per day</option>
                    <option value="week">per week</option>
                    <option value="month">per month</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="household-size" class="lead">Including your household worker, how large is their household?</label><br>
              <input
                  id="household-size"
                  class="slider"
                  style="width: 500px;"
                  type="text"
                  name="household-size"
                  data-slider-min="1"
                  data-slider-max="20"
                  data-slider-step="1"
                  value="3"
                  data-slider-value="3"/><br>
            </div>
            <p class="text-muted">75% of domestic workers are known to be sole income providers for their households (NIDS 2012).</p><br>
            <div class="col-sm-8 col-sm-offset-2">
              <button id="go-button" class="btn btn-primary btn-block">Calculate expenses</button>
            </div>
          </form>
        </div>
      </div>

      <hr>
    </div>
  </div>
</div>

<div id="result-container" class="container" style="display: none;">
  <div class="row">
    <h2>You pay an equivalent of <span id="output-amount" class="label">R0</span> per month.</h2>

    <p class="text-muted">*We assume full time employment at five days a week and a little over four weeks a month.</p>

    <h2>
      You are paying <span id="output-percentage" class="label">0%</span> of the household's minimal need of <span id="output-monthly-need">R0</span>.
    </h2>
    <p class="lead"><span id="output-statement"></span></p>
  </div>
  <div class="row">
    <div class="col-sm-8 col-sm-offset-2">
      <button id="show-assumptions-btn" class="btn btn-primary btn-block">Show assumptions</button>
    </div>
  </div>
</div>

<div id="assumption-container" class="container" style="display: none;">
<div class="row">

<div class="panel-group" id="accordion">

<!-- Food Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-food-expenses">
    <h4 class="panel-title">
      <span>
        Food Cost <span id="food-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-food-expenses" class="panel-collapse collapse in">
    <div class="panel-body">
      <div class="form-group">
        <label for="food-cost" class="lead">Providing 2000 calories per person per day.</label><br>
        <p>Using consumer price index data and a selected basket of goods we estimate that the daily average cost per person for attaining 2000 calories is R28 (R850 per month per person). </p>
        <input
            id="food-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="food-cost"
            data-slider-min="5"
            data-slider-max="100"
            data-slider-step="1"
            value="28"
            data-slider-value="28"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Food Panel end-->

<!-- Transportation Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-transport-expenses">
    <h4 class="panel-title">
      <span>
        Transportation Cost <span id="transport-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-transport-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="transport-cost" class="lead">Travel cost for your domestic worker.</label><br>
        <p>While travel costs are known to be high for domestic workers, we should stay mindful that travel times are often over an hour one way as well.</p>
        <input
            id="transport-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="transport-cost"
            data-slider-min="5"
            data-slider-max="50"
            data-slider-step="1"
            value="14"
            data-slider-value="14"/><br>
      </div>
      <div class="col-xs-7">
        <label for="transport-direction" class="lead">Is this cost one way or for a roundtrip?</label><br>
        <select class="selectpicker" name="transport-direction" id ="transport-direction"><br>
          <option value="oneway" selected>one way</option>
          <option value="roundtrip">round trip</option>
        </select>
      </div>

    </div>
  </div>
</div>
<!-- Transportation Panel end-->

<!-- Rent Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-rent-expenses">
    <h4 class="panel-title">
      <span>
        Housing Cost <span id="rent-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-rent-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <label for="rent-cost" class="lead">Housing Cost</label><br>
      <div class="form-group">
        <label for="rent-cost" class="lead">The cost of rent, utilities, and household maintenance.</label><br>
        <p>Generally speaking, higher rents are associated with better provision of sanitation services and lower crime rates in informal settlements</p>
        <input
            id="rent-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="rent-cost"
            data-slider-min="200"
            data-slider-max="1500"
            data-slider-step="100"
            value="500"
            data-slider-value="500"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Rent Panel end-->

<!-- Health Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-health-expenses">
    <h4 class="panel-title">
      <span>
        Healthcare Cost <span id="health-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-health-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="rent-cost" class="lead">Allocation for monthly healthcare needs</label><br>
        <p>Healthcare consists of having enough money for public consultancies which cost R39 per visit and for medicines. Healthcare costs can also involve health insurance.</p>
        <input
            id="health-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="health-cost"
            data-slider-min="40"
            data-slider-max="250"
            data-slider-step="10"
            value="160"
            data-slider-value="160"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Health Panel end-->

<!-- Education Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-education-expenses">
    <h4 class="panel-title">
      <span>
        Education Cost<span id="education-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-education-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="education-cost" class="lead"></label>
        <h5>Education costs are not just about school fees. They include stationery, uniform, textbooks, and even transportation costs. </h5>
        <input
            id="education-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="education-cost"
            data-slider-min="0"
            data-slider-max="3000"
            data-slider-step="100"
            value="300"
            data-slider-value="300"/><br>
        <label for="education-kids" class="lead">Number of school aged children</label><br>
        <input
            id="education-kids"
            class="slider"
            style="width: 500px;"
            type="text"
            name="education-kids"
            data-slider-min="0"
            data-slider-max="10"
            data-slider-step="1"
            value="2"
            data-slider-value="2"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Education Panel end-->

<!-- Communication Panel-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-communication-expenses">
    <h4 class="panel-title">
      <span>
        Communications Cost<span id="communication-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-communication-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="communication-cost" class="lead">Communication costs</label><br>
        <h5> Communications are necessary for staying in touch with families, friends, accessing news, and for emergencies.</h5>
        <input
            id="communication-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="communication-cost"
            data-slider-min="0"
            data-slider-max="1000"
            data-slider-step="100"
            value="100"
            data-slider-value="100"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Communication Panel end-->

<!-- Recreation Panel end-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-recreation-expenses">
    <h4 class="panel-title">
      <span>
        Recreation Cost<span id="recreation-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-recreation-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="recreation-cost" class="lead">Recreation costs</label><br>
        <h5> It is always good to take time out from work and managing a household. Everyone needs a break!</h5>
        <input
            id="recreation-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="recreation-cost"
            data-slider-min="0"
            data-slider-max="1000"
            data-slider-step="50"
            value="100"
            data-slider-value="100"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Recreation Panel end-->

<!-- Other Panel end-->
<div class="panel panel-default">
  <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" data-target="#panel-other-expenses">
    <h4 class="panel-title">
      <span>
        Other Costs<span id="other-total" class="pull-right">R...</span>
      </span>
    </h4>
  </div>
  <div id="panel-other-expenses" class="panel-collapse collapse">
    <div class="panel-body">
      <div class="form-group">
        <label for="other-cost" class="lead">Other costs</label><br>
        <h5> These include clothing, household items, personal care, and emergency expenses.</h5>
        <input
            id="other-cost"
            class="slider"
            style="width: 500px;"
            type="text"
            name="other-cost"
            data-slider-min="0"
            data-slider-max="1000"
            data-slider-step="50"
            value="200"
            data-slider-value="200"/><br>
      </div>
    </div>
  </div>
</div>
<!-- Other Panel end-->
</div>
</div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h3 class="modal-title" id="myModalLabel">The Minimal Need - Description</h3>
      </div>
      <div class="modal-body">
        <p>Using available data on consumer prices in South Africa, we developed a welfare standard we call <strong>The Minimal Need</strong>. </p><br>
        <h4>Here's how this tool works:</h4>
        <ol>
          <li>We ask what you pay (or would pay) your domestic worker.</li>
          <li>We show you where your pay rate stands compared to The Minimal Need.</li>
          <li>Lastly, we show you our calculations and allow you to alter our assumptions contextualize the tool to you.</li>
        </ol>
        <br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success btn-block" data-dismiss="modal">Get Started!</button>
      </div>
    </div>
  </div>
</div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="static\bootstrap\js\bootstrap.min.js"></script>
<script src="static\bootstrap\js\bootstrap-select.min.js"></script>
<script src="static\slider\js\bootstrap-slider.js"></script>
<script src="static\main.js"></script>


<script>

  $(document).ready(function(){

    $("#pay-amount").focus();

    // initialize sliders
    $('#household-size').slider({
      formater: function(value) {
        if (value==1)
          return '1 person';
        else
          return value + ' people';
      }
    });

    // initialize dropdown selects
    $('.selectpicker').selectpicker().on("change",function(){
      update_output();
    });

    // update on click
    $("#go-button").on('click', function(e){
      e.preventDefault();
      update_output();
    })

    $("#show-assumptions-btn").on('click', function(){
      $(this).hide('slow');
      $('#assumption-container').show('slow');
    })

    slider_arr = [
      [$('#transport-cost'), 'rand'],
      [$('#food-cost'), 'rand'],
      [$('#rent-cost'), 'rand'],
      [$('#education-cost'), 'rand'],
      [$('#education-kids'), 'child'],
      [$('#health-cost'), 'rand'],
      [$('#communication-cost'), 'rand'],
      [$('#recreation-cost'), 'rand'],
      [$('#other-cost'), 'rand'],
      [],
    ]

    function rand_formater(value) {
      return value + ' rand';
    }

    function child_formater(value) {
      if(value==1)
        return '1 child';
      else
        return value + ' children';
    }

    for (var i=0; i<slider_arr.length; i++){
      var tmp_slider = slider_arr[i][0];
      var tmp_formater = rand_formater;
      if (slider_arr[i][1] == "child")
        tmp_formater = child_formater;
      tmp_slider.slider({
        formater: tmp_formater
      }).on('slideStop', function(event){
        update_output()
      });
    }

  });
</script>

</body>
</html>